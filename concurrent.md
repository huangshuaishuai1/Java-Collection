**今天看到一个并发包下的集合，有点意思，记录一下，以后想到一个就记一个。**
## CopyOnWriteArrayList
在刷JDBC的源码的时候，看见DriverManager中用来存放Driver的集合是CopyOnWriteArrayList，就去了解了一下：
### 和ArrayList的比较
* CopyOnWriteArrayList是线程安全的
* CopyOnWriteArrayList的底层数据结构也是数组，只不过其数组上加了volatile关键字
* 它加的锁是ReentrantLock，只在增/删/改操作上进行加锁操作，读是不加锁的
* 和他的名字一样，它使用了CopyOnWrite来保证读写并发的一致性问题
### 增删改流程
* 先获取锁
* 拷贝源数据
* 在拷贝上进行操作
* 操作完成后写会源数据
* 释放锁
### 既然加锁了，为啥不直接操作源数据，还要拷贝一下？
原因是，在写操作的时候，读操作也是可以并发执行的，所以存在数据一致性问题。
### 其优缺点
* 优点：保证并发安全的前提下，读性能是高的
* 缺点：写性能不高，每次都要对原数组进行拷贝
### 适用场景
适用于高并发，读多写少的场景。
